var n;const r=((n=window.pindouDesktop)==null?void 0:n.apiBase)||"/api";async function o(t,s){const a=await fetch(`${r}${t}`,{headers:{"Content-Type":"application/json"},...s});if(!a.ok)throw new Error(`请求失败: ${a.status}`);if(a.status===204)return;const d=await a.text();if(d)return JSON.parse(d)}const e={get:t=>o(t),post:(t,s)=>o(t,{method:"POST",body:JSON.stringify(s)}),put:(t,s)=>o(t,{method:"PUT",body:JSON.stringify(s)}),patch:(t,s)=>o(t,{method:"PATCH",body:JSON.stringify(s)}),delete:t=>o(t,{method:"DELETE"})},i={list:()=>e.get("/beads"),tags:()=>e.get("/beads/tags"),deleteTag:t=>e.delete(`/beads/tags/${encodeURIComponent(t)}`),detail:t=>e.get(`/beads/${t}`),create:t=>e.post("/beads",t),update:(t,s)=>e.put(`/beads/${t}`,s),remove:t=>e.delete(`/beads/${t}`),updateStatusAndQty:(t,s)=>e.patch(`/beads/${t}/status`,s),saveColors:(t,s)=>e.put(`/beads/${t}/required-colors`,s),saveGridResult:(t,s)=>e.put(`/beads/${t}/grid-result`,s),extractColors:t=>e.post("/beads/extract-colors",{imageBase64:t}),extractColorsDebug:t=>e.post("/beads/extract-colors-debug",{imageBase64:t}),analyzeGrid:t=>e.post("/beads/analyze-grid",t),inventory:{stock:()=>e.get("/inventory/stock"),usage:()=>e.get("/inventory/usage"),demand:()=>e.get("/inventory/demand"),todoProjects:()=>e.get("/inventory/todo-projects"),restock:t=>e.post("/inventory/restock",t),updateThresholds:t=>e.patch("/inventory/thresholds",t),updateInTotals:t=>e.patch("/inventory/in-totals",t)}};export{i as b};
